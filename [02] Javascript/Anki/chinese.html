<script>
document.addEventListener("DOMContentLoaded", function() {
    // Function to apply color based on tone
    function colorizeCharacter(character, tone) {
        var color = "";
        switch (tone) {
            case "1": color = "red"; break;       // First tone
            case "2": color = "blue"; break;      // Second tone
            case "3": color = "green"; break;     // Third tone
            case "4": color = "purple"; break;    // Fourth tone
            default: color = "black";             // Neutral tone or no tone info
        }
        return '<span style="color:' + color + '">' + character + '</span>';
    }

    // Get the Chinese text and tone data
    var chineseText = "{{Characters}}";
    var tones = "{{Tones}}".split(',');

    // Verify that the length of tones matches the text
    if (chineseText.length !== tones.length) {
        console.error("Mismatch between text length and tone information.");
        return;
    }

    // Colorize each character based on tone
    var colorizedText = '';
    for (var i = 0; i < chineseText.length; i++) {
        colorizedText += colorizeCharacter(chineseText[i], tones[i]);
    }

    // Display the colorized text
    document.getElementById("colorized-chinese-text").innerHTML = colorizedText;
});
</script>

<!-- HTML element to display the colorized text -->
<div id="colorized-chinese-text"></div>{{FrontSide}}